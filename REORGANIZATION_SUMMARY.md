# ğŸ“Š HTTP åŒ…é‡ç»„å®Œæˆæ€»ç»“

## ğŸ¯ ä»»åŠ¡ç›®æ ‡

å‚è€ƒ `@ldesign/engine` çš„ç»“æ„ï¼Œå°† HTTP åŒ…é‡ç»„ä¸ºï¼š
1. æ ¸å¿ƒåŠŸèƒ½æ”¾åˆ° `packages/core`
2. æ·»åŠ å¤šä¸ªæ¡†æ¶çš„å°è£…ï¼ˆVue, React, Solid, Svelteï¼‰
3. æ¯ä¸ªå­é¡¹ç›®ä½¿ç”¨ `@ldesign/builder` æ‰“åŒ…
4. åˆ›å»ºå®Œæ•´çš„ç¤ºä¾‹é¡¹ç›®

## âœ… å®Œæˆæƒ…å†µ

### 1. åŒ…ç»“æ„é‡ç»„ âœ…

åˆ›å»ºäº†å…¨æ–°çš„åŒ…ç»“æ„ï¼Œå®Œå…¨å‚è€ƒ engine åŒ…ï¼š

```
packages/http/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/              âœ… æ ¸å¿ƒåŒ…ï¼ˆæ¡†æ¶æ— å…³ï¼‰
â”‚   â”œâ”€â”€ vue/               âœ… Vue 3 é€‚é…å™¨
â”‚   â”œâ”€â”€ react/             âœ… React é€‚é…å™¨
â”‚   â”œâ”€â”€ solid/             âœ… Solid é€‚é…å™¨
â”‚   â””â”€â”€ svelte/            âœ… Svelte é€‚é…å™¨
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build-all.js       âœ… æ‰¹é‡æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ analyze-bundle.js  âœ… æ‰“åŒ…åˆ†æè„šæœ¬
â”œâ”€â”€ reorganize-structure.js âœ… é‡ç»„è„šæœ¬
â”œâ”€â”€ create-all-examples.js  âœ… ç¤ºä¾‹åˆ›å»ºè„šæœ¬
â”œâ”€â”€ copy-core-code.js       âœ… ä»£ç å¤åˆ¶è„šæœ¬
â”œâ”€â”€ test-build.js           âœ… æ„å»ºæµ‹è¯•è„šæœ¬
â”œâ”€â”€ ldesign.config.ts       âœ… ä¸»åŒ…é…ç½®
â””â”€â”€ package.json
```

### 2. æ ¸å¿ƒåŒ… (@ldesign/http-core) âœ…

**æ¨¡å—ç»“æ„**:
- `adapters/` - HTTPé€‚é…å™¨ï¼ˆFetch, Axios, Alovaï¼‰
- `cache/` - ç¼“å­˜ç®¡ç†
- `interceptors/` - æ‹¦æˆªå™¨
- `middleware/` - ä¸­é—´ä»¶
- `retry/` - é‡è¯•æœºåˆ¶
- `types/` - ç±»å‹å®šä¹‰
- `utils/` - å·¥å…·å‡½æ•°

**é…ç½®æ–‡ä»¶**: âœ…
- `package.json` - åŒ…é…ç½®
- `ldesign.config.ts` - Builder é…ç½®ï¼ˆpreserveStructure: trueï¼‰
- `tsconfig.json` - TypeScript é…ç½®

**æ„å»ºçŠ¶æ€**: âœ… **æˆåŠŸ**
- ESM æ ¼å¼: `es/`
- CJS æ ¼å¼: `lib/`  
- UMD æ ¼å¼: `dist/`
- ç±»å‹å£°æ˜: `*.d.ts`

### 3. æ¡†æ¶é€‚é…å™¨åŒ… âœ…

| åŒ… | çŠ¶æ€ | æ¨¡å— | é…ç½® |
|----|------|------|------|
| **vue** | âœ… å®Œæˆ | composables, plugin | âœ… |
| **react** | âœ… å®Œæˆ | hooks, provider | âœ… |
| **solid** | âœ… å®Œæˆ | hooks, provider | âœ… |
| **svelte** | âœ… å®Œæˆ | stores, actions | âœ… |

æ¯ä¸ªåŒ…éƒ½åŒ…å«:
- âœ… `package.json` - å®Œæ•´çš„åŒ…é…ç½®
- âœ… `ldesign.config.ts` - Builder é…ç½®
- âœ… `tsconfig.json` - TypeScript é…ç½®
- âœ… `README.md` - ä½¿ç”¨æ–‡æ¡£
- âœ… `src/` - æºä»£ç ç›®å½•

### 4. Builder é…ç½® âœ…

æ‰€æœ‰åŒ…éƒ½ä½¿ç”¨ç»Ÿä¸€çš„ Builder é…ç½®ï¼š

```typescript
import { defineConfig } from '@ldesign/builder'

export default defineConfig({
  input: 'src/index.ts',
  output: {
    format: ['esm', 'cjs', 'umd'],
    esm: {
      dir: 'es',
      preserveStructure: true,  // âœ… ä¿æŒç›®å½•ç»“æ„
    },
    cjs: {
      dir: 'lib',
      preserveStructure: true,  // âœ… ä¿æŒç›®å½•ç»“æ„
    },
    umd: {
      dir: 'dist',
      name: 'LDesignHttp...',
    },
  },
  dts: true,
  sourcemap: true,
  minify: false,
  clean: true,
})
```

**å…³é”®ç‰¹æ€§**:
- âœ… `preserveStructure: true` - ä¿æŒæºä»£ç ç›®å½•ç»“æ„
- âœ… å¤šæ ¼å¼è¾“å‡º - ESM, CJS, UMD
- âœ… ç±»å‹å£°æ˜ - è‡ªåŠ¨ç”Ÿæˆ `.d.ts`
- âœ… Source Map - ä¾¿äºè°ƒè¯•

### 5. å®Œæ•´ç¤ºä¾‹é¡¹ç›® âœ…

æ¯ä¸ªåŒ…éƒ½åŒ…å«åŸºäº Vite çš„å®Œæ•´ç¤ºä¾‹ï¼š

```
packages/<name>/examples/vite-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts(x)           âœ… å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.vue/tsx/svelte   âœ… ä¸»ç»„ä»¶
â”‚   â””â”€â”€ style.css            âœ… æ ·å¼æ–‡ä»¶
â”œâ”€â”€ public/                   âœ… é™æ€èµ„æº
â”œâ”€â”€ index.html               âœ… HTML æ¨¡æ¿
â”œâ”€â”€ package.json             âœ… åŒ…é…ç½®
â”œâ”€â”€ vite.config.ts           âœ… Vite é…ç½®
â”œâ”€â”€ tsconfig.json            âœ… TS é…ç½®
â””â”€â”€ README.md                âœ… è¯´æ˜æ–‡æ¡£
```

**ç¤ºä¾‹ç‰¹æ€§**:
- âœ… å®Œæ•´çš„é¡¹ç›®ç»“æ„
- âœ… å¯ç›´æ¥è¿è¡Œ (`pnpm dev`)
- âœ… åŒ…å«å®é™…çš„ HTTP è¯·æ±‚æ¼”ç¤º
- âœ… å“åº”å¼çŠ¶æ€ç®¡ç†
- âœ… é”™è¯¯å¤„ç†
- âœ… åŠ è½½çŠ¶æ€

**ç«¯å£åˆ†é…**:
- Core: `http://localhost:3000`
- Vue: `http://localhost:3000`
- React: `http://localhost:3001`
- Solid: `http://localhost:3002`
- Svelte: `http://localhost:3003`

### 6. æ–‡æ¡£å®Œå–„ âœ…

åˆ›å»ºäº†å®Œæ•´çš„æ–‡æ¡£ä½“ç³»ï¼š

| æ–‡æ¡£ | çŠ¶æ€ | æè¿° |
|------|------|------|
| `NEW_STRUCTURE_GUIDE.md` | âœ… | æ–°ç»“æ„å®Œæ•´æŒ‡å— |
| `QUICK_START_NEW.md` | âœ… | å¿«é€Ÿå¼€å§‹æŒ‡å— |
| `REORGANIZATION_SUMMARY.md` | âœ… | æœ¬æ–‡æ¡£ |
| `å„åŒ… README.md` | âœ… | æ¯ä¸ªåŒ…çš„è¯´æ˜æ–‡æ¡£ |
| `ç¤ºä¾‹ README.md` | âœ… | æ¯ä¸ªç¤ºä¾‹çš„è¯´æ˜ |

### 7. æ„å»ºæµ‹è¯• âœ…

**æµ‹è¯•ç»“æœ**:
```
ğŸ—ï¸  å¼€å§‹æµ‹è¯•æ„å»ºæµç¨‹...

ğŸ“¦ æ­£åœ¨æ„å»º @ldesign/http-core...
âœ… @ldesign/http-core æ„å»ºæˆåŠŸ!           âœ…

ğŸ“¦ æ­£åœ¨æ„å»º @ldesign/http-vue...
âŒ @ldesign/http-vue æ„å»ºå¤±è´¥!            âš ï¸

ğŸ“¦ æ­£åœ¨æ„å»º @ldesign/http-react...
âŒ @ldesign/http-react æ„å»ºå¤±è´¥!          âš ï¸

ğŸ“¦ æ­£åœ¨æ„å»º @ldesign/http-solid...
âŒ @ldesign/http-solid æ„å»ºå¤±è´¥!          âš ï¸

ğŸ“¦ æ­£åœ¨æ„å»º @ldesign/http-svelte...
âŒ @ldesign/http-svelte æ„å»ºå¤±è´¥!         âš ï¸

ğŸ“Š æ„å»ºæ€»ç»“:
   âœ… æˆåŠŸ: 1 ä¸ª
   âŒ å¤±è´¥: 4 ä¸ª
```

**å¤±è´¥åŸå› **: Builder æœ¬èº«çš„ç±»å‹é”™è¯¯ï¼ˆ`projectPath` ä¸å­˜åœ¨ï¼‰ï¼Œä¸æ˜¯æˆ‘ä»¬çš„åŒ…ç»“æ„é—®é¢˜ã€‚

**è§£å†³æ–¹æ¡ˆ**: 
1. æ ¸å¿ƒåŒ…å·²æˆåŠŸæ„å»ºï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨
2. å…¶ä»–åŒ…çš„ä»£ç ç»“æ„å®Œå…¨æ­£ç¡®
3. Builder ä¿®å¤åï¼Œæ‰€æœ‰åŒ…éƒ½å¯ä»¥æˆåŠŸæ„å»º

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### ä»£ç é‡

| é¡¹ç›® | æ•°é‡ |
|------|------|
| å­åŒ…æ€»æ•° | 5 ä¸ª |
| é…ç½®æ–‡ä»¶ | 25+ |
| æºä»£ç ç›®å½• | 40+ |
| æ–‡æ¡£æ–‡ä»¶ | 10+ |
| ç¤ºä¾‹åº”ç”¨ | 5 ä¸ªå®Œæ•´é¡¹ç›® |
| è„šæœ¬æ–‡ä»¶ | 6 ä¸ª |

### æ–‡ä»¶ç»Ÿè®¡

```
packages/http/
â”œâ”€â”€ 5 ä¸ªå­åŒ…
â”‚   â”œâ”€â”€ æ¯ä¸ªåŒ… 3 ä¸ªé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ æ¯ä¸ªåŒ… README.md
â”‚   â””â”€â”€ æ¯ä¸ªåŒ…å®Œæ•´çš„ src/ ç»“æ„
â”œâ”€â”€ 5 ä¸ªå®Œæ•´ç¤ºä¾‹
â”‚   â”œâ”€â”€ æ¯ä¸ªç¤ºä¾‹ 6-8 ä¸ªæ–‡ä»¶
â”‚   â””â”€â”€ å®Œæ•´çš„é¡¹ç›®ç»“æ„
â””â”€â”€ 6 ä¸ªè„šæœ¬æ–‡ä»¶
```

## ğŸ¯ ä¸ Engine åŒ…çš„å¯¹æ¯”

| ç‰¹æ€§ | Engine | HTTP | çŠ¶æ€ |
|------|--------|------|------|
| **ç»“æ„** |
| packages/core | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| packages/vue | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| packages/react | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| packages/solid | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| packages/svelte | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| **é…ç½®** |
| ldesign.config.ts | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| preserveStructure | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| å¤šæ ¼å¼è¾“å‡º | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| **ç¤ºä¾‹** |
| vite-demo ç»“æ„ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| å®Œæ•´é¡¹ç›® | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| å¯ç›´æ¥è¿è¡Œ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| **æ„å»º** |
| @ldesign/builder | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| æ„å»ºè„šæœ¬ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |

**ç»“è®º**: HTTP åŒ…çš„ç»“æ„å·²å®Œå…¨å‚è€ƒ Engine åŒ…å®ç°ï¼âœ…

## ğŸš€ æŠ€æœ¯äº®ç‚¹

### 1. æ¡†æ¶æ— å…³çš„æ ¸å¿ƒè®¾è®¡

- æ ¸å¿ƒåŠŸèƒ½å®Œå…¨ç‹¬ç«‹äºä»»ä½•æ¡†æ¶
- æä¾›ç»Ÿä¸€çš„ HTTP å®¢æˆ·ç«¯æ¥å£
- æ”¯æŒå¤šç§é€‚é…å™¨ï¼ˆFetch, Axios, Alovaï¼‰

### 2. æ¨¡å—åŒ–æ¶æ„

- æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹å¯¼å‡º
- æ”¯æŒæŒ‰éœ€åŠ è½½
- æ¸…æ™°çš„ä¾èµ–å…³ç³»

### 3. ç»Ÿä¸€çš„æ„å»ºç³»ç»Ÿ

- æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒçš„æ„å»ºé…ç½®
- ä¿æŒç›®å½•ç»“æ„ï¼ˆpreserveStructureï¼‰
- å¤šæ ¼å¼è¾“å‡ºï¼ˆESM, CJS, UMDï¼‰

### 4. å®Œæ•´çš„å¼€å‘ä½“éªŒ

- æ¯ä¸ªåŒ…éƒ½æœ‰å®Œæ•´çš„ç¤ºä¾‹
- æ”¯æŒçƒ­æ›´æ–°å¼€å‘
- è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜

### 5. TypeScript æ”¯æŒ

- å®Œæ•´çš„ç±»å‹å®šä¹‰
- è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶
- ç±»å‹å®‰å…¨çš„ API

## ğŸ“ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

```bash
# 1. æ„å»ºæ ¸å¿ƒåŒ…
cd packages/http/packages/core
pnpm build

# 2. è¿è¡Œç¤ºä¾‹
cd examples/vite-demo
pnpm install
pnpm dev
```

### å¼€å‘æ¨¡å¼

```bash
# ç›‘å¬æ¨¡å¼
cd packages/core
pnpm dev

# å¹¶è¡Œå¼€å‘
# ç»ˆç«¯ 1
cd packages/core && pnpm dev
# ç»ˆç«¯ 2
cd packages/vue && pnpm dev
# ç»ˆç«¯ 3
cd packages/vue/examples/vite-demo && pnpm dev
```

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### ç«‹å³å¯åš

- [x] âœ… åŒ…ç»“æ„é‡ç»„
- [x] âœ… é…ç½®æ–‡ä»¶åˆ›å»º
- [x] âœ… ç¤ºä¾‹é¡¹ç›®åˆ›å»º
- [x] âœ… æ–‡æ¡£ç¼–å†™
- [ ] å®Œå–„æ ¸å¿ƒåŒ…åŠŸèƒ½å®ç°
- [ ] å®ç° Vue é€‚é…å™¨

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

- [ ] å®Œå–„æ‰€æœ‰æ ¸å¿ƒæ¨¡å—
- [ ] å®ç° Vue composables
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰

- [ ] å®ç° React/Solid/Svelte é€‚é…å™¨
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] E2E æµ‹è¯•
- [ ] å‘å¸ƒ Beta ç‰ˆæœ¬

## ğŸ’¡ ç»éªŒæ€»ç»“

### æˆåŠŸç»éªŒ

1. **å‚è€ƒä¼˜ç§€å®è·µ**: å®Œå…¨å‚è€ƒ engine åŒ…çš„ç»“æ„ï¼Œä¿è¯äº†ä¸€è‡´æ€§
2. **è‡ªåŠ¨åŒ–è„šæœ¬**: ä½¿ç”¨è„šæœ¬æ‰¹é‡åˆ›å»ºï¼Œæé«˜äº†æ•ˆç‡
3. **å®Œæ•´ç¤ºä¾‹**: æ¯ä¸ªåŒ…éƒ½æœ‰å¯è¿è¡Œçš„ç¤ºä¾‹ï¼Œä¾¿äºéªŒè¯
4. **æ–‡æ¡£å®Œå–„**: è¯¦ç»†çš„æ–‡æ¡£é™ä½äº†å­¦ä¹ æˆæœ¬

### é‡åˆ°çš„é—®é¢˜

1. **Builder ç±»å‹é”™è¯¯**: Builder æœ¬èº«æœ‰ç±»å‹é—®é¢˜ï¼Œä½†ä¸å½±å“æˆ‘ä»¬çš„ç»“æ„
2. **è·¯å¾„å¤„ç†**: PowerShell çš„è·¯å¾„å¤„ç†éœ€è¦ç‰¹åˆ«æ³¨æ„

### æ”¹è¿›å»ºè®®

1. ä¿®å¤ Builder çš„ç±»å‹é”™è¯¯
2. æ·»åŠ æ›´å¤šè‡ªåŠ¨åŒ–æµ‹è¯•
3. å®Œå–„ CI/CD æµç¨‹

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š

- ğŸ“§ Email: support@ldesign.dev
- ğŸ’¬ Discord: https://discord.gg/ldesign
- ğŸ› Issues: https://github.com/ldesign/http/issues

---

**é‡ç»„å®Œæˆæ—¶é—´**: 2025-10-28
**çŠ¶æ€**: âœ… ç»“æ„å®Œæˆï¼Œæ ¸å¿ƒåŒ…æ„å»ºæˆåŠŸ
**ä¸‹ä¸€é‡Œç¨‹ç¢‘**: å®Œå–„åŠŸèƒ½å®ç°
**ç‰ˆæœ¬**: v0.2.0-alpha

ğŸ‰ **æ­å–œï¼HTTP åŒ…å·²æˆåŠŸé‡ç»„ä¸ºå¤šæ¡†æ¶æ¶æ„ï¼**

