import{ref as e,computed as a,watch as t,unref as n,getCurrentInstance as r,onUnmounted as u}from"vue";import{createHttpClient as l}from"../factory.js";function o(o,s,c,i={}){const f=function(e){const a={baseURL:typeof window<"u"?window.location.origin:"http://localhost",...e};return l(a)}(),v=e(null),d=e(!1),E=e(null),m=e(!1),w=a(()=>null!==E.value);let T=null;const p=async e=>{try{d.value=!0,E.value=null,m.value=!1,T&&T.abort(),T=new AbortController;const a={...n(c),signal:T.signal};let t;switch(o){case"GET":t=await f.get(n(s),a);break;case"POST":t=await f.post(n(s),e,a);break;case"PUT":t=await f.put(n(s),e,a);break;case"PATCH":t=await f.patch(n(s),e,a);break;case"DELETE":t=await f.delete(n(s),a)}return v.value=t.data,i.onSuccess?.(t.data),t.data}catch(e){const a=e;return"AbortError"!==a.name&&(E.value=a,i.onError?.(a)),null}finally{d.value=!1,m.value=!0,i.onFinally?.()}};return"GET"===o&&!1!==i.immediate&&t(()=>n(s),()=>p(),{immediate:!0}),!1!==i.cancelOnUnmount&&r()&&u(()=>{T&&T.abort()}),{data:v,loading:d,error:E,finished:m,hasError:w,execute:p,reset:()=>{v.value=null,d.value=!1,E.value=null,m.value=!1},clearError:()=>{E.value=null}}}function s(e,a,t={}){return o("GET",e,a,t)}function c(e,a,t={}){return o("POST",e,a,t)}function i(e,a,t={}){return o("PUT",e,a,t)}function f(e,a,t={}){return o("DELETE",e,a,t)}function v(e,a,t={}){return o("PATCH",e,a,t)}export{f as useDelete,s as useGet,v as usePatch,c as usePost,i as usePut};
//# sourceMappingURL=useBasicHttp.js.map
