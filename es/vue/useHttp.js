import{inject as e,ref as t,provide as a,computed as u}from"vue";import{useDelete as s,usePatch as o,usePut as r,usePost as n,useMutation as l}from"./useMutation.js";import{useQuery as i}from"./useQuery.js";import{useRequest as c}from"./useRequest.js";const p=Symbol("http-client"),v=Symbol("http-config");function g(e,u){a(p,e),u&&a(v,t(u))}function d(){const t=e(p);if(!t)throw new Error("HTTP client not provided. Please use provideHttpClient() in a parent component.");return t}function h(){return e(v,t({}))}function P(){const e=d(),a=h(),u=(e={})=>({...a.value,...e,headers:{...a.value.headers,...e.headers}});return{client:e,globalConfig:a,request:t=>e.request(u(t)),get:(t,a)=>e.get(t,u(a)),post:(t,a,s)=>e.post(t,a,u(s)),put:(t,a,s)=>e.put(t,a,u(s)),delete:(t,a)=>e.delete(t,u(a)),patch:(t,a,s)=>e.patch(t,a,u(s)),head:(t,a)=>e.head(t,u(a)),options:(t,a)=>e.options(t,u(a)),useRequest:(a,s)=>c(e,t(u(a)),s),useQuery:(a,s,o)=>i(e,a,t(u(s)),o),useMutation:(t,a)=>l(e,t,a),usePost:(t,a)=>n(e,t,a),usePut:(t,a)=>r(e,t,a),usePatch:(t,a)=>o(e,t,a),useDelete:(t,a)=>s(e,t,a),cancelAll:t=>e.cancelAll(t),clearCache:()=>e.clearCache(),getActiveRequestCount:()=>e.getActiveRequestCount(),getConcurrencyStatus:()=>e.getConcurrencyStatus()}}function $(e){const{get:t,post:a,put:u,patch:s,delete:o,useQuery:r,useMutation:n}=P();return{useList:(t,a)=>r(["resource-list",e,t],{url:e,params:t},a),useDetail:(t,a)=>r(["resource-detail",e,t],{url:`${e}/${t}`},a),useCreate:t=>n(t=>a(`${e}`,t),t),useUpdate:t=>n(({id:t,data:a})=>u(`${e}/${t}`,a),t),usePatch:t=>n(({id:t,data:a})=>s(`${e}/${t}`,a),t),useDelete:t=>n(t=>o(`${e}/${t}`),t),list:a=>t(e,{params:a}),detail:a=>t(`${e}/${a}`),create:t=>a(e,t),update:(t,a)=>u(`${e}/${t}`,a),patch:(t,a)=>s(`${e}/${t}`,a),remove:t=>o(`${e}/${t}`)}}function m(e,a=1,s=10){const o=t(a),r=t(s),n=t(0),{useQuery:l}=P(),i=l(u(()=>["pagination",e,o.value,r.value]),u(()=>({url:e,params:{page:o.value,pageSize:r.value}})).value,{onSuccess:e=>{n.value=e.total}}),c=u(()=>Math.ceil(n.value/r.value)),p=u(()=>o.value<c.value),v=u(()=>o.value>1);return{...i,page:o,pageSize:r,total:n,totalPages:c,hasNextPage:p,hasPrevPage:v,nextPage:()=>{p.value&&o.value++},prevPage:()=>{v.value&&o.value--},goToPage:e=>{e>=1&&e<=c.value&&(o.value=e)},setPageSize:e=>{r.value=e,o.value=1}}}export{p as HTTP_CLIENT_KEY,v as HTTP_CONFIG_KEY,d as injectHttpClient,h as injectHttpConfig,g as provideHttpClient,P as useHttp,m as usePagination,$ as useResource};
//# sourceMappingURL=useHttp.js.map
