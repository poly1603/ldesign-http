import{ref as e,onUnmounted as t}from"vue";import{createCancelTokenSource as n,isCancelError as u}from"../utils/cancel.js";function a(a,o,l={}){const r=e(null),s=e(!1),c=e(null),i=e(!1);let v=n();const d=async(e,t)=>{s.value=!0,c.value=null,i.value=!1,v=n();try{l.onMutate&&l.onMutate(e);const n=await o(e,{...t,signal:v.token.promise});return r.value=n.data,i.value=!0,l.onSuccess&&l.onSuccess(n.data,e,n),n}catch(t){const n=t;throw u(n)||(c.value=n,i.value=!0,l.onError&&l.onError(n,e)),n}finally{s.value=!1,l.onSettled&&l.onSettled(r.value??void 0,c.value,e)}},f=d;return t(()=>{s.value&&v.cancel("Mutation cancelled due to component unmount")}),{data:r,loading:s,error:c,finished:i,mutate:d,mutateAsync:f,reset:()=>{r.value=null,s.value=!1,c.value=null,i.value=!1}}}function o(e,t,n){return a(0,(n,u)=>e.post(t,n,u),n)}function l(e,t,n){return a(0,(n,u)=>e.put(t,n,u),n)}function r(e,t,n){return a(0,(n,u)=>e.patch(t,n,u),n)}function s(e,t,n){return a(0,(n,u)=>e.delete(t,u),n)}export{s as useDelete,a as useMutation,r as usePatch,o as usePost,l as usePut};
//# sourceMappingURL=useMutation.js.map
