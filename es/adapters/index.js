import{AlovaAdapter as t}from"./alova.js";import{AxiosAdapter as a}from"./axios.js";import{FetchAdapter as e}from"./fetch.js";import{BaseAdapter as r}from"./base.js";class i{static register(t,a){this.adapters.set(t,a)}static create(t){if(this.adapterCache.has(t))return this.adapterCache.get(t);const a=this.adapters.get(t);if(!a)throw new Error(`Unknown adapter: ${t}`);const e=a();if(!e.isSupported())throw new Error(`Adapter '${t}' is not supported in current environment`);return this.adapterCache.set(t,e),e}static getAvailable(){const t=[];return this.adapters.forEach((a,e)=>{if(this.availabilityCache.has(e))this.availabilityCache.get(e)&&t.push(e);else try{const r=a().isSupported();this.availabilityCache.set(e,r),r&&t.push(e)}catch{this.availabilityCache.set(e,!1)}}),t}static getDefault(){const t=this.getAvailable();if(0===t.length)throw new Error("No available HTTP adapter found");const a=["fetch","axios","alova"];for(const e of a)if(t.includes(e))return this.create(e);return this.create(t[0])}static getRegistered(){return Array.from(this.adapters.keys())}static clearCache(){this.adapterCache.clear(),this.availabilityCache.clear()}static warmup(){this.getAvailable()}}function s(t){if(!t)return i.getDefault();if("string"==typeof t)return i.create(t);if("object"==typeof t&&"request"in t&&"isSupported"in t)return t;throw new Error("Invalid adapter configuration")}function o(t){try{return i.create(t).isSupported()}catch{return!1}}i.adapters=new Map([["fetch",()=>new e],["axios",()=>new a],["alova",()=>new t]]),i.adapterCache=new Map,i.availabilityCache=new Map;export{i as AdapterFactory,t as AlovaAdapter,a as AxiosAdapter,r as BaseAdapter,e as FetchAdapter,s as createAdapter,o as isAdapterAvailable};
//# sourceMappingURL=index.js.map
