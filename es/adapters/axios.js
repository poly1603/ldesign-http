import{BaseAdapter as s}from"./base.js";class e extends s{constructor(s){if(super(),this.name="axios",s)this.axios=s;else try{this.axios=require("axios")}catch{this.axios=null}}isSupported(){return null!==this.axios}async request(s){if(!this.isSupported())throw new Error("Axios is not available. Please install axios: npm install axios");const e=this.processConfig(s);try{const s=this.convertToAxiosConfig(e),r=await this.axios.request(s);return this.convertFromAxiosResponse(r,e)}catch(s){throw this.handleAxiosError(s,e)}}convertToAxiosConfig(s){let e=s.url||"";const r=s.params||{},t=s.baseURL,o=e.split("?");if(o.length>1){e=o[0];const s=o[1];new URLSearchParams(s).forEach((s,e)=>{const t=Number(s);r[e]=Number.isNaN(t)||""===s?s:t})}t&&e.startsWith(t)&&(e=e.substring(t.length),e.startsWith("/")||(e=`/${e}`));const a={url:e,method:s.method};if(s.headers&&Object.keys(s.headers).length>0&&(a.headers=s.headers),void 0!==s.data&&(a.data=s.data),void 0!==s.timeout&&(a.timeout=s.timeout),t&&(a.baseURL=t),void 0!==s.withCredentials&&(a.withCredentials=s.withCredentials),s.signal&&(a.signal=s.signal),r&&Object.keys(r).length>0&&(a.params=r),s.responseType)switch(s.responseType){case"json":default:a.responseType="json";break;case"text":a.responseType="text";break;case"blob":a.responseType="blob";break;case"arrayBuffer":a.responseType="arraybuffer";break;case"stream":a.responseType="stream"}return Object.keys(a).forEach(s=>{void 0===a[s]&&delete a[s]}),a}convertFromAxiosResponse(s,e){const r={url:e.url};return this.processResponse(s.data,s.status,s.statusText,s.headers||{},r)}handleAxiosError(s,e){if(s.response){const r=this.convertFromAxiosResponse(s.response,e),t=s.response.status,o=`Request failed with status code ${t}`,a=this.processError(new Error(o),e,r);return a.status=t,a.response=r,a}if(s.request){const r=this.processError(s,e);return r.isNetworkError=!0,r}return this.processError(s,e)}}export{e as AxiosAdapter};
//# sourceMappingURL=axios.js.map
