class e{constructor(e,t,r,s,o){this.monitor=e,this.priorityQueue=t,this.requestPool=r,this.concurrencyManager=s,this.cacheManager=o}getPerformanceStats(){return this.monitor.getStats()}getRecentMetrics(e){return this.monitor.getRecentMetrics(e)}getSlowRequests(){return this.monitor.getSlowRequests()}getFailedRequests(){return this.monitor.getFailedRequests()}enableMonitoring(){this.monitor.enable()}disableMonitoring(){this.monitor.disable()}getPriorityQueueStats(){return this.priorityQueue?.getStats()}getConnectionPoolStats(){return this.requestPool?.getStats()}getConnectionDetails(){return this.requestPool?.getConnectionDetails()}exportMetrics(){return{performance:this.monitor.exportMetrics(),priorityQueue:this.priorityQueue?.getStats(),connectionPool:this.requestPool?.getStats(),concurrency:this.concurrencyManager?.getStatus(),cache:this.cacheManager?.getStats?this.cacheManager.getStats():null}}clearMetrics(){this.monitor.clear()}setThresholds(e){void 0!==e.slowRequestThreshold&&this.monitor.setSlowRequestThreshold(e.slowRequestThreshold),e.errorRateThreshold}getRealtimeMetrics(){const e=this.monitor.getStats(),t=this.concurrencyManager?.getStatus();return{requestsPerSecond:this.calculateRequestsPerSecond(),averageResponseTime:e.averageResponseTime||0,errorRate:e.errorRate||0,activeRequests:t?.activeCount||0}}calculateRequestsPerSecond(){const e=this.monitor.getRecentMetrics(60);if(!e||0===e.length)return 0;const t=Date.now(),r=t-6e4,s=e.filter(e=>e.timestamp&&e.timestamp>r);if(0===s.length)return 0;const o=s[0];if(!o?.timestamp)return 0;const i=(t-o.timestamp)/1e3;return s.length/i}generateReport(){const e=this.exportMetrics(),t=this.getPerformanceStats(),r=[];return(t.averageResponseTime??0)>3e3&&r.push("Average response time is high. Consider implementing caching or optimizing server endpoints."),t.errorRate>.05&&r.push("Error rate is above 5%. Review error logs and implement retry strategies."),e.cache?.hitRate&&e.cache.hitRate<.3&&r.push("Cache hit rate is low. Consider adjusting cache TTL or preloading frequently accessed data."),e.concurrency?.queuedCount&&e.concurrency.queuedCount>10&&r.push("Many requests are queued. Consider increasing the concurrent request limit."),{summary:{totalRequests:t.totalRequests,successRate:1-t.errorRate,averageResponseTime:t.averageResponseTime,cacheHitRate:e.cache?.hitRate||0},details:e,recommendations:r}}}function t(t,r,s,o,i){return new e(t,r,s,o,i)}export{e as MonitoringHandler,t as createMonitoringHandler};
//# sourceMappingURL=client-monitoring.js.map
