# @ldesign/http Vanilla JavaScript ç¤ºä¾‹

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨åŸç”Ÿ JavaScript é¡¹ç›®ä¸­ä½¿ç”¨ `@ldesign/http` åº“çš„å„ç§åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# åœ¨ç¤ºä¾‹ç›®å½•ä¸­å®‰è£…ä¾èµ–
pnpm install

# æˆ–è€…ä»æ ¹ç›®å½•å®‰è£…
cd ../../.. && pnpm install
```

### è¿è¡Œç¤ºä¾‹

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm run preview
```

## ğŸ“‹ åŠŸèƒ½æ¼”ç¤º

### 1. åŸºç¡€ HTTP è¯·æ±‚

- **GET è¯·æ±‚**: è·å–æ•°æ®
- **POST è¯·æ±‚**: åˆ›å»ºæ–°æ•°æ®
- **PUT è¯·æ±‚**: æ›´æ–°æ•°æ®
- **DELETE è¯·æ±‚**: åˆ é™¤æ•°æ®

### 2. æ‹¦æˆªå™¨ç³»ç»Ÿ

- **è®¤è¯æ‹¦æˆªå™¨**: è‡ªåŠ¨æ·»åŠ  Authorization å¤´éƒ¨
- **æ—¥å¿—æ‹¦æˆªå™¨**: è®°å½•è¯·æ±‚å’Œå“åº”ä¿¡æ¯
- **å“åº”æ—¶é—´æ‹¦æˆªå™¨**: æµ‹é‡è¯·æ±‚è€—æ—¶
- **æ‹¦æˆªå™¨ç®¡ç†**: åŠ¨æ€æ·»åŠ å’Œç§»é™¤æ‹¦æˆªå™¨

### 3. é”™è¯¯å¤„ç†

- **ç½‘ç»œé”™è¯¯**: æ¨¡æ‹Ÿç½‘ç»œè¿æ¥å¤±è´¥
- **è¶…æ—¶é”™è¯¯**: æ¨¡æ‹Ÿè¯·æ±‚è¶…æ—¶
- **HTTP é”™è¯¯**: æ¨¡æ‹Ÿ 4xx/5xx çŠ¶æ€ç 
- **é‡è¯•æœºåˆ¶**: è‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚

### 4. ç¼“å­˜åŠŸèƒ½

- **å†…å­˜ç¼“å­˜**: ç¼“å­˜ GET è¯·æ±‚å“åº”
- **ç¼“å­˜æ§åˆ¶**: å¯ç”¨/ç¦ç”¨ç¼“å­˜
- **ç¼“å­˜æ¸…ç†**: æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
- **ç¼“å­˜ç»Ÿè®¡**: æ˜¾ç¤ºç¼“å­˜å‘½ä¸­ç‡

### 5. å¹¶å‘æ§åˆ¶

- **å¹¶å‘è¯·æ±‚**: åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚
- **è¯·æ±‚é˜Ÿåˆ—**: ç®¡ç†è¯·æ±‚é˜Ÿåˆ—
- **è¯·æ±‚å–æ¶ˆ**: å–æ¶ˆè¿›è¡Œä¸­çš„è¯·æ±‚
- **é™æµæ§åˆ¶**: æ§åˆ¶å¹¶å‘è¯·æ±‚æ•°é‡

### 6. è‡ªå®šä¹‰è¯·æ±‚

- **çµæ´»é…ç½®**: è‡ªå®šä¹‰è¯·æ±‚æ–¹æ³•ã€URLã€å¤´éƒ¨å’Œæ•°æ®
- **JSON æ”¯æŒ**: è‡ªåŠ¨å¤„ç† JSON æ•°æ®
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ”§ ä»£ç ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```javascript
import { createHttpClient } from '@ldesign/http'

// åˆ›å»ºå®¢æˆ·ç«¯
const http = createHttpClient({
  baseURL: 'https://api.example.com',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// å‘é€è¯·æ±‚
const response = await http.get('/users')
console.log(response.data)
```

### ä½¿ç”¨æ‹¦æˆªå™¨

```javascript
// æ·»åŠ è®¤è¯æ‹¦æˆªå™¨
http.interceptors.request.use((config) => {
  config.headers.Authorization = `Bearer ${token}`
  return config
})

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
http.interceptors.response.use(
  (response) => {
    console.log('è¯·æ±‚æˆåŠŸ:', response)
    return response
  },
  (error) => {
    console.error('è¯·æ±‚å¤±è´¥:', error)
    throw error
  }
)
```

### å¯ç”¨ç¼“å­˜

```javascript
const http = createHttpClient({
  cache: {
    enabled: true,
    ttl: 300000, // 5åˆ†é’Ÿç¼“å­˜
  },
})

// ç¬¬ä¸€æ¬¡è¯·æ±‚ä»ç½‘ç»œè·å–
const data1 = await http.get('/users')

// ç¬¬äºŒæ¬¡è¯·æ±‚ä»ç¼“å­˜è¿”å›
const data2 = await http.get('/users') // ç¬é—´è¿”å›
```

### é”™è¯¯å¤„ç†

```javascript
try {
  const response = await http.get('/users')
  console.log(response.data)
}
catch (error) {
  if (error.isNetworkError) {
    console.error('ç½‘ç»œé”™è¯¯:', error.message)
  }
  else if (error.isTimeoutError) {
    console.error('è¯·æ±‚è¶…æ—¶:', error.message)
  }
  else {
    console.error('å…¶ä»–é”™è¯¯:', error.message)
  }
}
```

## ğŸ“Š å®æ—¶ç»Ÿè®¡

ç¤ºä¾‹é¡µé¢æ˜¾ç¤ºä»¥ä¸‹å®æ—¶ç»Ÿè®¡ä¿¡æ¯ï¼š

- **æ´»è·ƒè¯·æ±‚æ•°**: å½“å‰æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚æ•°é‡
- **å®Œæˆè¯·æ±‚æ•°**: å·²å®Œæˆçš„è¯·æ±‚æ€»æ•°
- **ç¼“å­˜å‘½ä¸­æ•°**: ä»ç¼“å­˜è¿”å›çš„è¯·æ±‚æ•°é‡
- **é”™è¯¯æ•°é‡**: å‘ç”Ÿé”™è¯¯çš„è¯·æ±‚æ•°é‡

## ğŸ¯ å­¦ä¹ è¦ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**: äº†è§£å¦‚ä½•ç»„ç»‡å’Œä½¿ç”¨ä¸åŒçš„åŠŸèƒ½æ¨¡å—
2. **æ‹¦æˆªå™¨æ¨¡å¼**: å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ‹¦æˆªå™¨å¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹
3. **é”™è¯¯å¤„ç†**: æŒæ¡å®Œæ•´çš„é”™è¯¯å¤„ç†ç­–ç•¥
4. **æ€§èƒ½ä¼˜åŒ–**: äº†è§£ç¼“å­˜å’Œå¹¶å‘æ§åˆ¶çš„ä½¿ç”¨
5. **ç±»å‹å®‰å…¨**: ä½“éªŒ TypeScript å¸¦æ¥çš„ç±»å‹å®‰å…¨

## ğŸ”— ç›¸å…³é“¾æ¥

- [å®Œæ•´æ–‡æ¡£](../../docs/README.md)
- [API å‚è€ƒ](../../docs/api.md)
- [Vue 3 ç¤ºä¾‹](../vue3/README.md)
- [æœ€ä½³å®è·µ](../../docs/best-practices.md)

## ğŸ’¡ æç¤º

- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å’Œæ§åˆ¶å°æ—¥å¿—
- å°è¯•ä¿®æ”¹ä»£ç æ¥æµ‹è¯•ä¸åŒçš„é…ç½®é€‰é¡¹
- æŸ¥çœ‹æºä»£ç äº†è§£å…·ä½“çš„å®ç°ç»†èŠ‚
- å‚è€ƒæ–‡æ¡£è·å–æ›´å¤šé«˜çº§ç”¨æ³•
