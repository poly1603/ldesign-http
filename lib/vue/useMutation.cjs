"use strict";var e=require("vue"),t=require("../utils/cancel.cjs");function n(n,u,r={}){const a=e.ref(null),o=e.ref(!1),l=e.ref(null),c=e.ref(!1);let s=t.createCancelTokenSource();const i=async(e,n)=>{o.value=!0,l.value=null,c.value=!1,s=t.createCancelTokenSource();try{r.onMutate&&r.onMutate(e);const t=await u(e,{...n,signal:s.token.promise});return a.value=t.data,c.value=!0,r.onSuccess&&r.onSuccess(t.data,e,t),t}catch(n){const u=n;throw t.isCancelError(u)||(l.value=u,c.value=!0,r.onError&&r.onError(u,e)),u}finally{o.value=!1,r.onSettled&&r.onSettled(a.value??void 0,l.value,e)}},v=i;return e.onUnmounted(()=>{o.value&&s.cancel("Mutation cancelled due to component unmount")}),{data:a,loading:o,error:l,finished:c,mutate:i,mutateAsync:v,reset:()=>{a.value=null,o.value=!1,l.value=null,c.value=!1}}}exports.useDelete=function(e,t,u){return n(0,(n,u)=>e.delete(t,u),u)},exports.useMutation=n,exports.usePatch=function(e,t,u){return n(0,(n,u)=>e.patch(t,n,u),u)},exports.usePost=function(e,t,u){return n(0,(n,u)=>e.post(t,n,u),u)},exports.usePut=function(e,t,u){return n(0,(n,u)=>e.put(t,n,u),u)};
//# sourceMappingURL=useMutation.cjs.map
