"use strict";var e=require("vue"),t=require("./useMutation.cjs"),u=require("./useQuery.cjs"),a=require("./useRequest.cjs");const s=Symbol("http-client"),r=Symbol("http-config");function o(){const t=e.inject(s);if(!t)throw new Error("HTTP client not provided. Please use provideHttpClient() in a parent component.");return t}function n(){return e.inject(r,e.ref({}))}function l(){const s=o(),r=n(),l=(e={})=>({...r.value,...e,headers:{...r.value.headers,...e.headers}});return{client:s,globalConfig:r,request:e=>s.request(l(e)),get:(e,t)=>s.get(e,l(t)),post:(e,t,u)=>s.post(e,t,l(u)),put:(e,t,u)=>s.put(e,t,l(u)),delete:(e,t)=>s.delete(e,l(t)),patch:(e,t,u)=>s.patch(e,t,l(u)),head:(e,t)=>s.head(e,l(t)),options:(e,t)=>s.options(e,l(t)),useRequest:(t,u)=>a.useRequest(s,e.ref(l(t)),u),useQuery:(t,a,r)=>u.useQuery(s,t,e.ref(l(a)),r),useMutation:(e,u)=>t.useMutation(s,e,u),usePost:(e,u)=>t.usePost(s,e,u),usePut:(e,u)=>t.usePut(s,e,u),usePatch:(e,u)=>t.usePatch(s,e,u),useDelete:(e,u)=>t.useDelete(s,e,u),cancelAll:e=>s.cancelAll(e),clearCache:()=>s.clearCache(),getActiveRequestCount:()=>s.getActiveRequestCount(),getConcurrencyStatus:()=>s.getConcurrencyStatus()}}exports.HTTP_CLIENT_KEY=s,exports.HTTP_CONFIG_KEY=r,exports.injectHttpClient=o,exports.injectHttpConfig=n,exports.provideHttpClient=function(t,u){e.provide(s,t),u&&e.provide(r,e.ref(u))},exports.useHttp=l,exports.usePagination=function(t,u=1,a=10){const s=e.ref(u),r=e.ref(a),o=e.ref(0),{useQuery:n}=l(),c=n(e.computed(()=>["pagination",t,s.value,r.value]),e.computed(()=>({url:t,params:{page:s.value,pageSize:r.value}})).value,{onSuccess:e=>{o.value=e.total}}),i=e.computed(()=>Math.ceil(o.value/r.value)),p=e.computed(()=>s.value<i.value),v=e.computed(()=>s.value>1);return{...c,page:s,pageSize:r,total:o,totalPages:i,hasNextPage:p,hasPrevPage:v,nextPage:()=>{p.value&&s.value++},prevPage:()=>{v.value&&s.value--},goToPage:e=>{e>=1&&e<=i.value&&(s.value=e)},setPageSize:e=>{r.value=e,s.value=1}}},exports.useResource=function(e){const{get:t,post:u,put:a,patch:s,delete:r,useQuery:o,useMutation:n}=l();return{useList:(t,u)=>o(["resource-list",e,t],{url:e,params:t},u),useDetail:(t,u)=>o(["resource-detail",e,t],{url:`${e}/${t}`},u),useCreate:t=>n(t=>u(`${e}`,t),t),useUpdate:t=>n(({id:t,data:u})=>a(`${e}/${t}`,u),t),usePatch:t=>n(({id:t,data:u})=>s(`${e}/${t}`,u),t),useDelete:t=>n(t=>r(`${e}/${t}`),t),list:u=>t(e,{params:u}),detail:u=>t(`${e}/${u}`),create:t=>u(e,t),update:(t,u)=>a(`${e}/${t}`,u),patch:(t,u)=>s(`${e}/${t}`,u),remove:t=>r(`${e}/${t}`)}};
//# sourceMappingURL=useHttp.cjs.map
