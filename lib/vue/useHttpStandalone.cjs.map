{"version":3,"file":"useHttpStandalone.cjs","sources":["../../src/vue/useHttpStandalone.ts"],"sourcesContent":["import type { HttpClientConfig, RequestConfig } from '../types'\r\nimport { computed, ref } from 'vue'\r\nimport { createAdapter } from '../adapters'\r\nimport { HttpClientImpl } from '../client'\r\n\r\n/**\r\n * HTTP客户端组合式函数\r\n */\r\nexport function useHttp(config?: HttpClientConfig) {\r\n  const adapter = createAdapter(config?.adapter)\r\n  const client = new HttpClientImpl(config || {}, adapter)\r\n  const loading = ref(false)\r\n  const error = ref<Error | null>(null)\r\n  const data = ref<unknown>(null)\r\n\r\n  // 计算属性\r\n  const isLoading = computed(() => loading.value)\r\n  const hasError = computed(() => error.value !== null)\r\n\r\n  // 清除错误\r\n  const clearError = () => {\r\n    error.value = null\r\n  }\r\n\r\n  // 重置状态\r\n  const reset = () => {\r\n    loading.value = false\r\n    error.value = null\r\n    data.value = null\r\n  }\r\n\r\n  // GET请求\r\n  const get = async <T = unknown>(url: string, config?: RequestConfig): Promise<T | null> => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await client.get<T>(url, config)\r\n      data.value = response.data\r\n      return response.data\r\n    }\r\n    catch (err) {\r\n      error.value = err as Error\r\n      return null\r\n    }\r\n    finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // POST请求\r\n  const post = async <T = unknown, D = unknown>(\r\n    url: string,\r\n    postData?: D,\r\n    config?: RequestConfig,\r\n  ): Promise<T | null> => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await client.post<T>(url, postData, config)\r\n      data.value = response.data\r\n      return response.data\r\n    }\r\n    catch (err) {\r\n      error.value = err as Error\r\n      return null\r\n    }\r\n    finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // PUT请求\r\n  const put = async <T = unknown, D = unknown>(\r\n    url: string,\r\n    putData?: D,\r\n    config?: RequestConfig,\r\n  ): Promise<T | null> => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await client.put<T>(url, putData, config)\r\n      data.value = response.data\r\n      return response.data\r\n    }\r\n    catch (err) {\r\n      error.value = err as Error\r\n      return null\r\n    }\r\n    finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  // DELETE请求\r\n  const del = async <T = unknown>(url: string, config?: RequestConfig): Promise<T | null> => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await client.delete<T>(url, config)\r\n      data.value = response.data\r\n      return response.data\r\n    }\r\n    catch (err) {\r\n      error.value = err as Error\r\n      return null\r\n    }\r\n    finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  return {\r\n    // 状态\r\n    loading: isLoading,\r\n    error,\r\n    data,\r\n    hasError,\r\n\r\n    // 方法\r\n    get,\r\n    post,\r\n    put,\r\n    delete: del,\r\n    clearError,\r\n    reset,\r\n\r\n    // 客户端实例\r\n    client,\r\n  }\r\n}\r\n"],"names":["config","adapter","createAdapter","client","HttpClientImpl","loading","ref","error","data","isLoading","computed","value","hasError","get","async","url","response","err","post","postData","put","putData","delete","clearError","reset"],"mappings":"gHAQM,SAAkBA,GACtB,MAAMC,EAAUC,EAAAA,cAAcF,GAAQC,SAChCE,EAAS,IAAIC,EAAAA,eAAeJ,GAAU,CAAA,EAAIC,GAC1CI,EAAUC,EAAAA,KAAI,GACdC,EAAQD,EAAAA,IAAkB,MAC1BE,EAAOF,EAAAA,IAAa,MAGpBG,EAAYC,EAAAA,SAAS,IAAML,EAAQM,OACnCC,EAAWF,EAAAA,SAAS,IAAsB,OAAhBH,EAAMI,OA8FtC,MAAO,CAELN,QAASI,EACTF,MAAAA,EACAC,KAAAA,EACAI,SAAAA,EAGAC,IAvFUC,MAAoBC,EAAaf,KAC3C,IACEK,EAAQM,OAAQ,EAChBJ,EAAMI,MAAQ,KACd,MAAMK,QAAiBb,EAAOU,IAAOE,EAAKf,GAC1C,OAAAQ,EAAKG,MAAQK,EAASR,KACfQ,EAASR,IAClB,CAAA,MACOS,GACL,OAAAV,EAAMI,MAAQM,EACP,IACT,CAAA,QAEEZ,EAAQM,OAAQ,CAClB,GA0EAO,KAtEWJ,MACXC,EACAI,EACAnB,KAEA,IACEK,EAAQM,OAAQ,EAChBJ,EAAMI,MAAQ,KACd,MAAMK,QAAiBb,EAAOe,KAAQH,EAAKI,EAAUnB,GACrD,OAAAQ,EAAKG,MAAQK,EAASR,KACfQ,EAASR,IAClB,CAAA,MACOS,GACL,OAAAV,EAAMI,MAAQM,EACP,IACT,CAAA,QAEEZ,EAAQM,OAAQ,CAClB,GAqDAS,IAjDUN,MACVC,EACAM,EACArB,KAEA,IACEK,EAAQM,OAAQ,EAChBJ,EAAMI,MAAQ,KACd,MAAMK,QAAiBb,EAAOiB,IAAOL,EAAKM,EAASrB,GACnD,OAAAQ,EAAKG,MAAQK,EAASR,KACfQ,EAASR,IAClB,CAAA,MACOS,GACL,OAAAV,EAAMI,MAAQM,EACP,IACT,CAAA,QAEEZ,EAAQM,OAAQ,CAClB,GAgCAW,OA5BUR,MAAoBC,EAAaf,KAC3C,IACEK,EAAQM,OAAQ,EAChBJ,EAAMI,MAAQ,KACd,MAAMK,QAAiBb,EAAOmB,OAAUP,EAAKf,GAC7C,OAAAQ,EAAKG,MAAQK,EAASR,KACfQ,EAASR,IAClB,CAAA,MACOS,GACL,OAAAV,EAAMI,MAAQM,EACP,IACT,CAAA,QAEEZ,EAAQM,OAAQ,CAClB,GAeAY,WAvGiB,KACjBhB,EAAMI,MAAQ,MAuGda,MAnGY,KACZnB,EAAQM,OAAQ,EAChBJ,EAAMI,MAAQ,KACdH,EAAKG,MAAQ,MAmGbR,OAAAA,EAEJ"}