"use strict";class t{constructor(r={}){this.config={transformDates:r.transformDates??!0,transformBigInt:r.transformBigInt??!1,nullToUndefined:r.nullToUndefined??!1,emptyStringToNull:r.emptyStringToNull??!1,datePattern:r.datePattern??t.ISO_DATE_REGEX,customTransformers:r.customTransformers??[]}}transform(t){return this.transformValue("root",t)}transformValue(t,r){for(const e of this.config?.customTransformers||[]){const n=e(t,r);if(void 0!==n)return n}return null===r?this.config?.nullToUndefined?void 0:null:void 0!==r?"string"==typeof r?this.transformString(t,r):Array.isArray(r)?r.map((r,e)=>this.transformValue(`${t}[${e}]`,r)):"object"==typeof r&&null!==r?this.transformObject(r):r:void 0}transformString(t,r){if(""===r&&this.config?.emptyStringToNull)return null;if(this.config?.transformDates&&this.isDateField(t,r)){const t=new Date(r);if(!Number.isNaN(t.getTime()))return t}if(this.config?.transformBigInt&&this.isBigIntString(r))try{return BigInt(r)}catch{}return r}transformObject(t){const r={};for(const[e,n]of Object.entries(t))r[e]=this.transformValue(e,n);return r}isDateField(r,e){const n=r.toLowerCase(),s=t.DATE_FIELD_NAMES.some(t=>n.includes(t.toLowerCase())),o=this.config?.datePattern.test(e);return s||o}isBigIntString(t){if(!/^\d+$/.test(t))return!1;const r=Number(t);return r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER}serialize(t){return this.serializeValue(t)}serializeValue(t){if(t instanceof Date)return t.toISOString();if("bigint"==typeof t)return t.toString();if(Array.isArray(t))return t.map(t=>this.serializeValue(t));if("object"==typeof t&&null!==t){const r={};for(const[e,n]of Object.entries(t))r[e]=this.serializeValue(n);return r}return t}}t.ISO_DATE_REGEX=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/,t.DATE_FIELD_NAMES=["date","time","createdAt","updatedAt","deletedAt","publishedAt","timestamp","startTime","endTime"];const r=new t;exports.DataTransformer=t,exports.createDataTransformInterceptor=function(r){const e=new t(r);return{request:{onFulfilled:t=>(t.data&&(t.data=e.serialize(t.data)),t)},response:{onFulfilled:t=>(t.data&&(t.data=e.transform(t.data)),t)}}},exports.createDataTransformer=function(r){return new t(r)},exports.globalDataTransformer=r,exports.nullToUndefined=function(r){return new t({transformDates:!1,nullToUndefined:!0}).transform(r)},exports.transformBigInts=function(r){return new t({transformDates:!1,transformBigInt:!0}).transform(r)},exports.transformDates=function(r){return new t({transformDates:!0,transformBigInt:!1}).transform(r)};
//# sourceMappingURL=transformer.cjs.map
