"use strict";var e=require("./utils/download.cjs"),a=require("./utils/upload.cjs");class o{constructor(e){this.client=e}async upload(e,o,t={}){let r,n;if(o instanceof FormData){r=o,n=[];for(const[,e]of r.entries())e instanceof File&&n.push(e)}else{n=Array.isArray(o)?o:[o],n.forEach(e=>a.validateFile(e,t)),r=new FormData;const e=t.fileField||"files";n.forEach((a,o)=>{r.append(`${e}[${o}]`,a)}),t.formData&&Object.entries(t.formData).forEach(([e,a])=>{r.append(e,a)})}const s=Date.now(),l=new a.ProgressCalculator,i={method:"POST",url:e,data:r,headers:{...t.headers||{}},...t||{},onUploadProgress:t.onProgress?e=>{const a=l.calculate(e.loaded,e.total);t.onProgress(a)}:void 0};return{...await this.client.request(i),file:n[0],duration:Date.now()-s}}async download(a,o={}){const t=Date.now(),r=new e.DownloadProgressCalculator,n={method:"GET",url:a,responseType:"blob",...o||{},onDownloadProgress:o.onProgress?e=>{const a=r.calculate(e.loaded,e.total,o.filename);o.onProgress(a)}:void 0},s=await this.client.request(n);let l=o.filename;l||(l=e.getFilenameFromResponse(s.headers)||e.getFilenameFromURL(s.config.url||a)||"download");const i=s.data?.type||e.getMimeTypeFromFilename(l);let d;return!1!==o.autoSave&&typeof window<"u"&&(e.saveFileToLocal(s.data,l),d=URL.createObjectURL(s.data)),{data:s.data,filename:l,size:s.data.size,type:i,duration:Date.now()-t,url:d}}}exports.FileOperationHandler=o,exports.createFileOperationHandler=function(e){return new o(e)};
//# sourceMappingURL=client-operations.cjs.map
